<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Wiki v16</title> <!-- Updated version number to v16 -->
</head>
<body>
    <h1>Music Wiki v16</h1> <!-- Updated version number to v16 -->

    <!-- Create tables to display data -->
    <section id="bands">
        <h2>Bands</h2>
        <table id="band-table">
            <!-- Band data will be displayed here -->
        </table>
    </section>

    <section id="albums">
        <h2>Albums</h2>
        <table id="album-table">
            <!-- Album data will be displayed here -->
        </table>
    </section>

    <section id="musicians">
        <h2>Musicians</h2>
        <table id="musician-table">
            <!-- Musician data will be displayed here -->
        </table>
    </section>

    <section id="songs">
        <h2>Songs</h2>
        <table id="song-table">
            <!-- Song data will be displayed here -->
        </table>
    </section>

    <script>
        // Create an object to store musician-band associations
        const musicianBands = {};

        // Function to parse Songs data and populate musicianBands object
        function parseSongsData() {
            fetch('URL_TO_SONGS_SHEET_TSV_FILE') // Replace with the actual URL
                .then(response => response.text())
                .then(data => {
                    const rows = data.split('\n').map(row => row.split('\t'));

                    for (let i = 1; i < rows.length; i++) {
                        const songData = rows[i];
                        const songMusicians = songData[3].split(',').map(musician => musician.trim()); // Assuming musician names are in the 4th column (index 3)

                        // Update the musicianBands object
                        songMusicians.forEach(musician => {
                            if (!musicianBands[musician]) {
                                musicianBands[musician] = [];
                            }
                            if (!musicianBands[musician].includes(songData[2])) { // Assuming band names are in the 3rd column (index 2)
                                musicianBands[musician].push(songData[2]);
                            }
                        });
                    }

                    // Once data is parsed, update the Musicians table
                    updateMusiciansTable();
                })
                .catch(error => {
                    console.error(`Error fetching Songs data: ${error}`);
                });
        }

        // Function to update the Musicians table with associated bands
        function updateMusiciansTable() {
            const musicianTable = document.getElementById('musician-table'); // Replace with your table ID
            const musicianRows = musicianTable.querySelectorAll('tr');

            // Iterate through musician rows and update associated bands
            musicianRows.forEach(row => {
                const musicianName = row.querySelector('td:first-child').textContent; // Assuming musician names are in the first column
                if (musicianBands[musicianName]) {
                    const bandsCell = row.querySelector('td:nth-child(2)'); // Assuming bands are displayed in the second column
                    bandsCell.textContent = musicianBands[musicianName].join(', ');
                }
            });
        }

        // Call the function to parse Songs data and update Musicians table
        parseSongsData();
    </script>
</body>
</html>
